<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Mente Verde ‚Äî Tudo (Feito por Filipe 2025 com ajuda de sua equipe)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#e8fff6; --bg2:#e3f7ff;
  --p1:#0f5132; --p2:#16a34a; --accent:#ffd166; --soft:#9be7c4;
  --muted:#1f4b3a; --card:#fff; --radius:14px; --shadow:0 20px 60px rgba(10,40,30,0.08);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(120deg,var(--bg1),var(--bg2));background-size:300% 300%;animation:bgShift 16s ease-in-out infinite;color:var(--muted);-webkit-font-smoothing:antialiased}
@keyframes bgShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.container{max-width:1200px;margin:18px auto;padding:18px}
.header{display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{display:flex;align-items:center;gap:14px}
.logo{width:88px;height:88px;border-radius:18px;background:linear-gradient(135deg,var(--p1),var(--p2));display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-family:Poppins;font-size:22px;box-shadow:0 18px 50px rgba(20,80,60,0.12)}
.title h1{margin:0;font-family:Poppins;font-size:26px}
.title p{margin:2px 0;color:rgba(35,73,55,0.9)}
.controls{display:flex;gap:10px}
.btn{background:linear-gradient(90deg,var(--p2),var(--soft));color:white;padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:700;box-shadow:0 8px 20px rgba(12,60,45,0.06)}
.btn.ghost{background:transparent;border:1px solid rgba(20,120,80,0.08);color:var(--p1)}
.nav{margin-top:16px;display:flex;gap:10px;flex-wrap:wrap}
.nav button{background:transparent;border:1px solid rgba(42,157,143,0.06);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;color:var(--muted)}
.nav button.active{background:linear-gradient(90deg,var(--p1),var(--p2));color:white;box-shadow:0 8px 20px rgba(12,60,45,0.08)}
.layout{display:grid;grid-template-columns:1fr 380px;gap:22px;margin-top:18px}
@media(max-width:980px){.layout{grid-template-columns:1fr}}
.card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);overflow:hidden}
.hero{display:flex;gap:18px;align-items:center}
.hero-art{width:260px;height:150px;border-radius:12px;background:linear-gradient(180deg,#f7fffb,#eefef3);display:flex;align-items:center;justify-content:center;color:var(--p1);font-weight:700;position:relative;overflow:hidden}
.catalog-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
@media(max-width:700px){.catalog-grid{grid-template-columns:1fr}}
.disease{padding:14px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfff9);border:1px solid rgba(12,50,30,0.03);transition:transform .26s,box-shadow .26s}
.disease:hover{transform:translateY(-10px);box-shadow:0 40px 80px rgba(10,40,25,0.08)}
.quiz-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.quiz-tile{padding:14px;border-radius:12px;cursor:pointer;border:1px solid rgba(12,50,30,0.03);transition:transform .18s;background:linear-gradient(90deg, rgba(22,163,74,0.04), rgba(86,197,150,0.02))}
.quiz-tile:hover{transform:translateY(-8px)}
#quizModal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:18px;background:linear-gradient(rgba(6,20,10,0.66),rgba(6,20,10,0.66));z-index:999}
#quizCard{width:min(980px,96%);max-height:92%;overflow:auto;border-radius:14px;padding:18px;background:var(--card);box-shadow:0 30px 80px rgba(6,40,20,0.36);transform:translateY(12px);opacity:0;transition:all .28s}
#quizModal.show #quizCard{transform:none;opacity:1}
.progress{height:12px;background:linear-gradient(90deg,#f0f7f3,#eefaf6);border-radius:999px;overflow:hidden}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--p2),var(--soft));width:0%;transition:width .36s ease}
.options{display:flex;flex-direction:column;gap:10px;margin-top:8px}
.option-btn{padding:12px;border-radius:12px;border:1px solid rgba(12,50,30,0.06);background:#fff;cursor:pointer;transition:transform .12s,box-shadow .12s}
.option-btn:hover{transform:translateX(6px);box-shadow:0 8px 24px rgba(10,40,25,0.06)}
.option-btn.selected{background:linear-gradient(90deg,var(--p2),var(--soft));color:white;border:0}
.result{margin-top:12px;padding:12px;border-radius:12px;background:linear-gradient(90deg,#f0fff4,#e8fff0);font-weight:700;color:var(--p1)}
.chat-box{display:flex;flex-direction:column;height:420px}
.chat-window{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fbfff9,#f3fff2);overflow:auto}
.chat-bubble{display:inline-block;padding:10px 12px;border-radius:12px;margin:8px 0;max-width:78%}
.chat-bot{background:linear-gradient(180deg,#eefbf0,#e6f7e8);border:1px solid rgba(15,122,83,0.04)}
.chat-user{background:linear-gradient(90deg,var(--p2),var(--soft));color:white;float:right}
.chat-input{display:flex;gap:8px;margin-top:8px}
.chat-input input{flex:1;padding:10px;border-radius:10px;border:1px solid #e9f6ef}
.diary{background:linear-gradient(180deg,#fff,#f7fff7);padding:12px;border-radius:12px}
.diary-list{display:flex;flex-direction:column;gap:10px;margin-top:12px}
.diary-item{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfff9);border:1px solid rgba(10,40,20,0.03)}
.fab{position:fixed;right:20px;bottom:22px;background:linear-gradient(135deg,var(--p1),var(--soft));color:white;width:64px;height:64px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-weight:800;box-shadow:0 18px 50px rgba(12,60,45,0.16);cursor:pointer;z-index:900;animation:fabPulse 2s infinite}
@keyframes fabPulse{0%{transform:scale(1)}50%{transform:scale(1.06)}100%{transform:scale(1)}}
.shimmer{background:linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.6), rgba(255,255,255,0.0));background-size:200% 100%;animation:shimmer 2.4s linear infinite}
@keyframes shimmer{0%{background-position:-100% 0}100%{background-position:100% 0}}
.leaf{position:fixed;bottom:-50px;font-size:20px;opacity:0.95;pointer-events:none;z-index:800}
.small{font-size:13px;color:#355f4f}
footer.credit{margin-top:24px;text-align:center;color:var(--p1);font-weight:700;padding:18px}
@media(max-width:700px){ .catalog-grid, .quiz-grid{grid-template-columns:1fr} .layout{grid-template-columns:1fr} .hero{flex-direction:column} }
</style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <div class="logo">MV</div>
        <div class="title"><h1>Mente Verde</h1><p>Cuide da sua mente ‚Äî informa√ß√£o, quizzes e apoio</p></div>
      </div>
      <div class="controls">
        <button class="btn" onclick="navGo('quizzes')">Fazer quiz</button>
        <button class="btn ghost" onclick="navGo('aprender')">Aprender</button>
      </div>
    </header>

    <nav class="nav" role="navigation">
      <button class="active" data-section="home">üè† Home</button>
      <button data-section="quizzes">‚ùì Quizzes</button>
      <button data-section="aprender">üìö Aprender</button>
      <button data-section="diario">üìù Di√°rio</button>
      <button data-section="ajuda">üí¨ Ajuda</button>
    </nav>

    <div class="layout">
      <main>
        <!-- HOME -->
        <section id="home" class="card">
          <div class="hero">
            <div>
              <h2>Voc√™ n√£o est√° sozinho ‚Äî Mente Verde</h2>
              <p class="small">Informa√ß√£o confi√°vel, quizzes (12 perguntas cada), assistente que conversa e di√°rio privado.</p>
              <div style="margin-top:12px;display:flex;gap:10px">
                <button class="btn" onclick="navGo('quizzes')">Fazer um quiz</button>
                <button class="btn ghost" onclick="navGo('aprender')">Ler explica√ß√µes</button>
              </div>
            </div>
            <div class="hero-art" aria-hidden><div style="font-size:40px">üåø</div></div>
          </div>

          <div style="margin-top:18px" class="card shimmer">
            <h3>Destaques</h3>
            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
              <div style="flex:1;min-width:200px;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff,#f7fff7)">Quizzes com 12 perguntas ‚Äî um por vez</div>
              <div style="flex:1;min-width:200px;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff,#f7fff7)">Assistente que aprende com voc√™</div>
              <div style="flex:1;min-width:200px;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff,#f7fff7)">Di√°rio privado (no navegador)</div>
            </div>
          </div>
        </section>

        <!-- APRENDER -->
        <section id="aprender" class="card" style="display:none">
          <h2>Aprender</h2>
          <p class="small">Clique em qualquer condi√ß√£o para ver a explica√ß√£o detalhada (esta p√°gina N√ÉO cont√©m quizzes).</p>
          <div class="catalog-grid" id="catalogGrid"></div>
        </section>

        <!-- QUIZZES -->
        <section id="quizzes" class="card" style="display:none">
          <h2>Quizzes</h2>
          <p class="small">Escolha um quiz ‚Äî cada quiz √© apresentado pergunta a pergunta com barra de progresso.</p>
          <div class="quiz-grid" id="quizGrid" style="margin-top:12px"></div>
        </section>

        <!-- DI√ÅRIO -->
        <section id="diario" class="card" style="display:none">
          <h2>Di√°rio</h2>
          <p class="small">Registre como est√° se sentindo ‚Äî salvo somente no seu navegador.</p>
          <div class="diary">
            <textarea id="diaryText" rows="5" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e8f6ef" placeholder="Escreva aqui..."></textarea>
            <div style="margin-top:8px"><button id="saveDiary" class="btn">Salvar entrada</button></div>
            <div id="diaryList" class="diary-list"></div>
          </div>
        </section>

        <!-- AJUDA -->
        <section id="ajuda" class="card" style="display:none">
          <h2>Assistente ‚Äî Mente Verde</h2>
          <p class="small">Converse com o assistente ‚Äî ele tenta identificar emo√ß√£o, sugere passos e abre quizzes quando solicitado.</p>
          <div style="display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;margin-top:8px">
            <div style="flex:1;min-width:300px">
              <div class="chat-box">
                <div id="chatWindow" class="chat-window" aria-live="polite"></div>
                <div class="chat-input"><input id="chatInput" placeholder="Escreva o que sente..." /><button id="chatSend" class="btn">Enviar</button></div>
              </div>
            </div>
            <aside style="width:320px;min-width:260px">
              <div class="card"><h4>Recursos</h4><p class="small">CVV: 188 ‚Äî apoio emocional (Brasil). Se estiver em risco, procure emerg√™ncia.</p></div>
            </aside>
          </div>
        </section>

      </main>

      <!-- SIDE -->
      <aside>
        <div class="card">
          <h3>Quizzes r√°pidos</h3>
          <div id="quickQuizzes" style="margin-top:8px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Sobre</h3>
          <p class="small">Mente Verde ‚Äî projeto educativo sobre sa√∫de mental.</p>
        </div>
      </aside>
    </div>

    <footer class="credit">Feito por Filipe 2025 com ajuda de sua equipe üåø</footer>
  </div>

  <div class="fab" id="fab" title="Abrir assistente">üí¨</div>

  <!-- QUIZ MODAL -->
  <div id="quizModal" role="dialog" aria-modal="true"><div id="quizCard" class="card"></div></div>

<script>
/* =================== DADOS (Doen√ßas + QUIZZES com 12 perguntas cada, todas completas) =================== */
const DISEASES = [
  {id:'ansiosos', title:'Transtornos ansiosos', short:'Medo e preocupa√ß√£o excessivos (TAG, p√¢nico, fobias).', details:`Transtornos de ansiedade envolvem preocupa√ß√£o excessiva, ataques de p√¢nico e evitamento. Tratamentos incluem terapia e, quando necess√°rio, medica√ß√£o.`},
  {id:'depressivos', title:'Transtornos depressivos', short:'Tristeza persistente e perda de interesse.', details:`Depress√£o implica humor deprimido, perda de interesse, altera√ß√µes do sono e apetite. Busque avalia√ß√£o profissional se sintomas persistirem.`},
  {id:'toc', title:'Transtorno obsessivo-compulsivo (TOC)', short:'Pensamentos intrusivos e rituais repetitivos.', details:`TOC envolve obsess√µes (pensamentos intrusivos) e compuls√µes (rituais) que visam reduzir ansiedade.`},
  {id:'bipolar', title:'Transtorno bipolar', short:'Oscila√ß√µes entre mania/hipomania e depress√£o.', details:`Caracteriza-se por epis√≥dios de humor elevado e epis√≥dios depressivos; requer acompanhamento psiqui√°trico.`},
  {id:'psicoticos', title:'Transtornos psic√≥ticos', short:'Perda de contato com a realidade (ex.: esquizofrenia).', details:`Inclui del√≠rios e alucina√ß√µes; avalia√ß√£o e tratamento psiqui√°trico s√£o essenciais.`},
  {id:'neurodesenvolvimento', title:'Transtornos do neurodesenvolvimento', short:'TEA, TDAH e similares.', details:`Condi√ß√µes que surgem na inf√¢ncia afetando aten√ß√£o, comunica√ß√£o e comportamento.`},
  {id:'neurocognitivos', title:'Transtornos neurocognitivos', short:'Dem√™ncias e perda cognitiva.', details:`Decl√≠nio cognitivo progressivo que afeta mem√≥ria, linguagem e autonomia.`},
  {id:'personalidade', title:'Transtornos de personalidade', short:'Padr√µes duradouros que dificultam rela√ß√µes.', details:`Padr√µes r√≠gidos de comportamento que causam sofrimento e prejudicam relacionamentos.`},
  {id:'uso_substancias', title:'Transtornos por uso de subst√¢ncias', short:'Uso prejudicial de √°lcool e drogas.', details:`Uso de subst√¢ncias que causa preju√≠zos sociais, legais e de sa√∫de.`},
  {id:'sono', title:'Transtornos do sono', short:'Ins√¥nia, apneia e narcolepsia.', details:`Dist√∫rbios do sono prejudicam funcionamento diurno e sa√∫de geral.`},
  {id:'burnout', title:'S√≠ndrome de Burnout', short:'Esgotamento por trabalho cr√¥nico.', details:`Exaust√£o emocional relacionada ao trabalho, com distanciamento e queda de desempenho.`}
];

/* 12 perguntas por quiz (espec√≠ficas e leg√≠veis) */
const QUIZZES = {
  ansiosos: [
    'Voc√™ sente preocupa√ß√£o excessiva sobre v√°rias coisas quase todos os dias?',
    'Tem dificuldade para controlar a preocupa√ß√£o quando surge?',
    'Sente sua frequ√™ncia card√≠aca acelerada sem causa f√≠sica aparente?',
    'Tem ataques de p√¢nico com sensa√ß√£o de morte iminente?',
    'Evita situa√ß√µes sociais ou lugares por medo intenso?',
    'Tem dificuldade para relaxar mesmo quando quer?',
    'A ansiedade atrapalha seu trabalho ou estudo?',
    'Tem ins√¥nia por ficar ruminando pensamentos ansiosos?',
    'Os sintomas de ansiedade come√ßaram ou pioraram ap√≥s um evento estressante?',
    'Sente sintomas f√≠sicos (tens√£o, tremores, n√°usea) relacionados √† ansiedade?',
    'Tem medo ou preocupa√ß√£o desproporcional em rela√ß√£o a pequenas coisas?',
    'A ansiedade interfere em seus relacionamentos pessoais?'
  ],
  depressivos: [
    'Voc√™ sente tristeza profunda na maior parte dos dias?',
    'Perdeu interesse ou prazer em atividades que antes gostava?',
    'Teve perda ou ganho de peso significativo sem inten√ß√£o?',
    'Tem ins√¥nia ou dorme excessivamente com frequ√™ncia?',
    'Sente fadiga ou perda de energia quase todos os dias?',
    'Experiencia sentimentos de inutilidade ou culpa excessiva?',
    'Tem dificuldade de concentra√ß√£o ou tomar decis√µes simples?',
    'J√° pensou em se machucar ou encontrou-se pensando em morte?',
    'Isola-se de amigos e fam√≠lia mais do que antes?',
    'Perdeu motiva√ß√£o para cuidar de si mesmo(a)?',
    'Seu desempenho no trabalho/escola foi prejudicado pelos sintomas?',
    'Esses sintomas persistem h√° mais de duas semanas consecutivas?'
  ],
  toc: [
    'Voc√™ tem pensamentos intrusivos ou indesejados que voltam repetidamente?',
    'Sente que precisa realizar rituais (como lavar as m√£os) para reduzir ansiedade?',
    'Gasta muito tempo em rituais ou verifica√ß√µes (por exemplo: portas, fog√£o)?',
    'Evita lugares ou atividades por medo de desencadear obsess√µes?',
    'Reconhece que esses pensamentos s√£o excessivos, mas n√£o consegue control√°-los?',
    'Os rituais interferem no seu dia-a-dia (trabalho, estudos, rela√ß√µes)?',
    'Sente grande ang√∫stia se n√£o conseguir realizar o ritual?',
    'Tem pensamentos que o envergonham e por isso evita falar sobre eles?',
    'J√° tentou reduzir os rituais sem sucesso prolongado?',
    'Os pensamentos muitas vezes s√£o sobre contamina√ß√£o, ordem ou dano?',
    'Os rituais come√ßaram na adolesc√™ncia ou idade adulta jovem?',
    'Procurou ajuda profissional por esses sintomas anteriormente?'
  ],
  bipolar: [
    'J√° teve per√≠odos em que se sentiu excessivamente energizado(a) por dias sem precisar de sono?',
    'Durante epis√≥dios, falava mais r√°pido e parecia ter muitas ideias ao mesmo tempo?',
    'J√° tomou decis√µes impulsivas durante fases de humor elevado que causaram problemas?',
    'Teve per√≠odos prolongados de humor extremamente deprimido?',
    'As mudan√ßas de humor ocorrem em ciclos que atrapalham sua rotina?',
    'J√° teve comportamento de alto risco durante fases de euforia (gastos, sexo, drogas)?',
    'Notou diferen√ßa marcante no padr√£o de sono entre fases altas e baixas?',
    'As oscila√ß√µes de humor afetam seus relacionamentos?',
    'Algu√©m j√° comentou que seu comportamento muda drasticamente sem motivo aparente?',
    'Recebeu diagn√≥stico pr√©vio relacionado a transtornos de humor?',
    'Os epis√≥dios de humor foram suficientemente intensos para buscar ajuda m√©dica?',
    'Os epis√≥dios de eleva√ß√£o e depress√£o se repetem ao longo do tempo?'
  ],
  psicoticos: [
    'Voc√™ j√° ouviu vozes que outras pessoas n√£o escutam?',
    'Acredita em coisas que outras pessoas dizem n√£o ser verdade (del√≠rios)?',
    'Tem experi√™ncias visuais ou auditivas que parecem reais mas outros n√£o veem?',
    'Sente que seus pensamentos s√£o colocados ou retirados por for√ßas externas?',
    'Tem dificuldade para separar imagina√ß√£o de realidade?',
    'Notou mudan√ßas de comportamento que preocupam amigos/familiares?',
    'Tem epis√≥dios de confus√£o intensa ou desorienta√ß√£o?',
    'Os sintomas causam preju√≠zo no trabalho ou na vida social?',
    'Alguma vez foi internado por sintomas psiqui√°tricos?',
    'Usou ou usa medica√ß√£o prescrita para controlar sintomas psic√≥ticos?',
    'Sente medo ou persegui√ß√£o sem motivo objetivo?',
    'Os sintomas duram por semanas ou meses sem melhora?'
  ],
  neurodesenvolvimento: [
    'Houve atraso no desenvolvimento da fala ou linguagem quando era crian√ßa?',
    'Tem dificuldade significativa em entender e usar sinais sociais (olhar, gestos)?',
    'Apresenta padr√µes restritos ou interesses intensos por temas espec√≠ficos?',
    'Tem dificuldades persistentes de aten√ß√£o e hiperatividade desde cedo?',
    'Costuma ter comportamentos repetitivos ou rotinas r√≠gidas?',
    'Sente sensibilidade excessiva a sons, texturas ou luzes?',
    'Tem dificuldade para mudar de atividade ou aceitar mudan√ßas de rotina?',
    'No per√≠odo escolar, teve dificuldades persistentes de aprendizado?',
    'Tem problemas para entender humor ou sarcasmo nas conversas?',
    'Tem dificuldade em manter amizades por diferen√ßas de comportamento social?',
    'Recebeu diagn√≥stico de TDAH, TEA ou similar na inf√¢ncia?',
    'Esses padr√µes ainda impactam sua vida adulta?'
  ],
  neurocognitivos: [
    'Tem dificuldades recentes e persistentes de mem√≥ria recente (esquecer conversas)?',
    'Est√° se confundindo com datas ou locais que antes conhecia bem?',
    'Tem dificuldades para seguir instru√ß√µes simples que antes fazia sem problemas?',
    'Perde objetos importantes com frequ√™ncia e n√£o lembra onde deixou?',
    'Percebeu mudan√ßas de personalidade ou comportamento nas √∫ltimas semanas/meses?',
    'Precisa de ajuda para tarefas dom√©sticas que antes fazia sozinho(a)?',
    'Tem dificuldade para encontrar palavras durante conversas?',
    'J√° se sentiu desorientado em ambientes conhecidos?',
    'Sua fam√≠lia notou decl√≠nio cognitivo claro?',
    'Tem dificuldades em planejar e organizar tarefas b√°sicas?',
    'Os sintomas pioraram progressivamente ao longo do tempo?',
    'Procurou avalia√ß√£o neurol√≥gica ou cognitiva por esses sintomas?'
  ],
  personalidade: [
    'Sente padr√µes de rela√ß√µes intensas e inst√°veis com as pessoas pr√≥ximas?',
    'Tem medo persistente de abandono e reage de forma intensa a isso?',
    'Age de forma impulsiva que prejudica trabalho ou relacionamentos?',
    'Tem sentimentos cr√¥nicos de vazio ou t√©dio interno?',
    'Apresenta mudan√ßas bruscas na autoimagem (√†s vezes se v√™ como √≥timo, depois p√©ssimo)?',
    'Tem dificuldade em controlar a raiva em situa√ß√µes cotidianas?',
    'Chama aten√ß√£o negativa por comportamentos inst√°veis em p√∫blico?',
    'Evita intimidade por medo de se machucar emocionalmente?',
    'J√° recebeu diagn√≥stico de transtorno de personalidade por um profissional?',
    'Seus padr√µes de comportamento s√£o duradouros e come√ßaram cedo na vida adulta?',
    'Esses padr√µes causam sofrimento significativo ou preju√≠zo funcional?',
    'Tentou mudar esses padr√µes e sentiu dificuldade persistente em faz√™-lo?'
  ],
  uso_substancias: [
    'Usa √°lcool ou outras drogas com frequ√™ncia maior que voc√™ gostaria?',
    'J√° tentou reduzir o uso sem sucesso prolongado?',
    'Precisa de quantidades maiores para sentir o mesmo efeito (toler√¢ncia)?',
    'Sente sintomas f√≠sicos de abstin√™ncia quando para de usar?',
    'O uso j√° causou problemas no trabalho, estudos ou relacionamentos?',
    'J√° assumiu riscos (dirigir, brigar) sob efeito de subst√¢ncias?',
    'Parou de frequentar atividades antes apreciadas por causa do uso?',
    'Fam√≠lia ou amigos j√° demonstraram preocupa√ß√£o com seu uso?',
    'Teve problemas legais relacionados ao uso de subst√¢ncias?',
    'Sente perda de controle sobre a quantidade ou frequ√™ncia do uso?',
    'J√° procurou tratamento profissional para reduzir o uso?',
    'O uso afeta sua sa√∫de f√≠sica de forma vis√≠vel?'
  ],
  sono: [
    'Tem dificuldade para iniciar o sono com frequ√™ncia?',
    'Acorda v√°rias vezes durante a noite e tem dificuldade para voltar a dormir?',
    'Sente-se cansado durante o dia apesar de ter dormido horas suficientes?',
    'Tem cochilos diurnos longos que atrapalham sua rotina?',
    'Roncado alto ou relatos de pausas respirat√≥rias durante o sono?',
    'Movimentos frequentes das pernas ou inquieta√ß√£o durante a noite?',
    'Uso frequente de eletr√¥nicos antes de dormir que prejudica o sono?',
    'Depende de rem√©dios para dormir com regularidade?',
    'Seu sono √© irregular e voc√™ troca o hor√°rio frequentemente?',
    'O sono ruim prejudica seu desempenho no trabalho/escola?',
    'J√° passou por avalia√ß√£o m√©dica por problemas de sono?',
    'Sente sonol√™ncia excessiva em situa√ß√µes inseguras (dirigir, operar m√°quinas)?'
  ],
  burnout: [
    'Sente-se esgotado(a) emocionalmente pela rotina de trabalho?',
    'Perdeu motiva√ß√£o para realizar tarefas que antes fazia com √¢nimo?',
    'Sente distanciamento ou cinismo em rela√ß√£o ao trabalho?',
    'Percebe queda na sua efic√°cia profissional ou produtividade?',
    'Dificuldade para se recuperar emocionalmente ap√≥s o expediente?',
    'Trabalha muitas horas sem descanso adequado com frequ√™ncia?',
    'Sente-se sobrecarregado(a) com responsabilidades do trabalho?',
    'Notou problemas de sono e sa√∫de f√≠sica relacionados ao trabalho?',
    'Sentiu altera√ß√£o do apetite ou estado f√≠sico por causa do trabalho?',
    'O trabalho afeta seu equil√≠brio entre vida pessoal e profissional?',
    'Pensou em desistir do emprego por exaust√£o emocional?',
    'Buscou ou pensou em buscar ajuda por causa do esgotamento?'
  ]
};

/* =================== RENDER / UI =================== */
function buildCatalog(){
  const grid = document.getElementById('catalogGrid'); grid.innerHTML = '';
  DISEASES.forEach(d=>{
    const el = document.createElement('div'); el.className='disease';
    el.innerHTML = `<h3>${d.title}</h3><p class="small">${d.short}</p><div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end"><button class="btn small" onclick="openDetail('${d.id}')">Ver explica√ß√£o</button><button class="btn ghost small" onclick="openQuiz('${d.id}')">Fazer quiz</button></div>`;
    grid.appendChild(el);
  });
}
function buildQuizzes(){
  const grid = document.getElementById('quizGrid'); grid.innerHTML = '';
  DISEASES.forEach(d=>{
    const t = document.createElement('div'); t.className='quiz-tile';
    t.innerHTML = `<strong>${d.title}</strong><div class="small" style="margin-top:8px">${d.short}</div>`;
    t.onclick = ()=> openQuiz(d.id);
    grid.appendChild(t);
  });
  const quick = document.getElementById('quickQuizzes'); quick.innerHTML = '';
  DISEASES.slice(0,6).forEach(d=>{
    const q = document.createElement('div'); q.style.margin='6px 0';
    q.innerHTML = `<button class="btn" style="width:100%" onclick="openQuiz('${d.id}')">${d.title}</button>`;
    quick.appendChild(q);
  });
}

/* =================== NAVIGATION =================== */
const navBtns = Array.from(document.querySelectorAll('.nav button'));
navBtns.forEach(b=>b.addEventListener('click', ()=>{ const s=b.getAttribute('data-section'); navGo(s); }));
function navGo(section){
  navBtns.forEach(x=>x.classList.remove('active'));
  const btn = navBtns.find(x=>x.getAttribute('data-section')===section); if(btn) btn.classList.add('active');
  ['home','aprender','quizzes','diario','ajuda'].forEach(id=>{ const el=document.getElementById(id); if(el) el.style.display = (id===section)?'block':'none'; });
  window.scrollTo({top:0,behavior:'smooth'});
}

/* =================== QUIZ modal (pergunta-a-pergunta) =================== */
const quizModal = document.getElementById('quizModal');
const quizCard = document.getElementById('quizCard');

function showModal(){ quizModal.style.display='flex'; quizModal.classList.add('show'); document.body.style.overflow='hidden'; }
function closeModal(){ quizModal.style.display='none'; quizModal.classList.remove('show'); quizCard.innerHTML=''; document.body.style.overflow='auto'; }

function openDetail(id){
  const d = DISEASES.find(x=>x.id===id);
  quizCard.innerHTML = `<h2>${d.title}</h2><pre style="white-space:pre-wrap;color:var(--muted)">${d.details}</pre><div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px"><button class="btn" onclick="openQuiz('${d.id}')">Fazer quiz</button><button class="btn ghost small" onclick="closeModal()">Fechar</button></div>`;
  showModal();
}

function openQuiz(id){
  const qset = QUIZZES[id];
  if(!qset){ alert('Quiz n√£o dispon√≠vel para: ' + id); return; }
  const d = DISEASES.find(x=>x.id===id) || {title:id};
  let idx = 0;
  const answers = Array(qset.length).fill(null);

  function renderQuestion(i){
    quizCard.innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Quiz ‚Äî ${d.title}</h2><div><button class="btn ghost" onclick="closeModal()">Fechar</button></div>
      </div>
      <div class="progress" aria-hidden><i id="progressBar" style="width:${Math.round(((i)/qset.length)*100)}%"></i></div>
      <div id="questionWrap" class="question-area"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div class="small">Pergunta ${i+1} de ${qset.length}</div>
        <div><button id="prevQ" class="btn ghost small">Anterior</button> <button id="nextQ" class="btn small">Pr√≥xima</button></div>
      </div>
    `;
    const body = document.getElementById('questionWrap');
    body.innerHTML = '';
    const qdiv = document.createElement('div');
    qdiv.innerHTML = `<div style="font-weight:800;font-size:18px">${i+1}. ${qset[i]}</div>`;
    const opts = document.createElement('div'); opts.className='options';
    // respostas padr√£o 4 op√ß√µes Likert onde faz sentido, sen√£o 2 op√ß√µes Sim/N√£o
    const sampleOpts = qset[i].toLowerCase().includes('sim') || qset[i].toLowerCase().includes('j√°') || qset[i].toLowerCase().includes('tem') ? ['Sim','N√£o'] : ['Nunca','√Äs vezes','Frequentemente','Quase sempre'];
    sampleOpts.forEach((label,oi)=>{
      const b = document.createElement('button'); b.className='option-btn'; b.innerText = label;
      if(answers[i]===oi) b.classList.add('selected');
      b.onclick = ()=>{ answers[i]=oi; Array.from(opts.children).forEach(c=>c.classList.remove('selected')); b.classList.add('selected'); };
      opts.appendChild(b);
    });
    qdiv.appendChild(opts); body.appendChild(qdiv);

    document.getElementById('prevQ').onclick = ()=>{ if(i>0){ idx = i-1; renderQuestion(idx); } };
    document.getElementById('nextQ').onclick = ()=>{ if(i < qset.length - 1){ idx = i+1; renderQuestion(idx); } else { finishQuiz(); } };
  }

  function finishQuiz(){
    if(answers.every(a=>a===null) && !confirm('Voc√™ n√£o respondeu nada. Enviar mesmo assim?')) return;
    // pontua√ß√£o simples: se resposta index null->0, else index value. For 2-option map Sim=3/N√£o=0 to give weight.
    let score = 0; let max = 0;
    for(let i=0;i<answers.length;i++){
      const q = QUIZZES[id][i];
      const optsCount = (q.toLowerCase().includes('sim')||q.toLowerCase().includes('j√°')||q.toLowerCase().includes('tem')) ? 2 : 4;
      max += (optsCount===2?3:3);
      const val = answers[i];
      if(val===null) continue;
      if(optsCount===2) score += (val===0?3:0);
      else score += val; // 0..3
    }
    const pct = Math.round((score / max) * 100);
    const interp = pct<35 ? 'Baixo risco ‚Äî sintomas leves ou ausentes.' : pct<70 ? 'Risco moderado ‚Äî avalie procurar apoio.' : 'Alto risco ‚Äî procure avalia√ß√£o profissional.';
    quizCard.innerHTML = `<h2>${d.title} ‚Äî Resultado</h2><div class="result">${pct}% ‚Äî ${interp}</div>
      <div style="margin-top:12px"><strong>Pr√≥ximos passos</strong><ul><li>Considere avalia√ß√£o profissional qualificada.</li><li>Autocuidado: sono regular, respira√ß√£o, atividade f√≠sica e rotina.</li><li>Se risco agudo, procure emerg√™ncia/apoio imediato.</li></ul></div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px"><button class="btn" onclick="closeModal()">Fechar</button></div>`;
    // salvar local (simples)
    try{
      const KEY='mv_results_all';
      const cur = JSON.parse(localStorage.getItem(KEY)||'[]');
      cur.push({id,dtitle:d.title,date:new Date().toISOString(),pct});
      localStorage.setItem(KEY,JSON.stringify(cur));
    }catch(e){}
  }

  showModal();
  renderQuestion(0);
}

/* =================== STORAGE: di√°rio =================== */
const DIARY_KEY = 'mv_diary_all';
function loadDiary(){
  const cur = JSON.parse(localStorage.getItem(DIARY_KEY)||'[]'); const list = document.getElementById('diaryList'); list.innerHTML = '';
  cur.slice().reverse().forEach(it=>{ const div = document.createElement('div'); div.className='diary-item'; div.innerHTML = `<strong>${new Date(it.date).toLocaleString()}</strong><p class="small" style="margin:8px 0">${escapeHtml(it.text)}</p>`; list.appendChild(div); });
}
document.getElementById('saveDiary').addEventListener('click', ()=>{
  const v = document.getElementById('diaryText').value.trim(); if(!v) return alert('Escreva algo.'); const cur = JSON.parse(localStorage.getItem(DIARY_KEY)||'[]'); cur.push({date:new Date().toISOString(), text:v}); localStorage.setItem(DIARY_KEY, JSON.stringify(cur)); document.getElementById('diaryText').value=''; loadDiary(); alert('Entrada salva localmente.'); });

/* =================== CHAT ASSISTANT (humano e aprendendo) =================== */
const BOT_MEM_KEY = 'mv_bot_mem_all';
let botMemory = JSON.parse(localStorage.getItem(BOT_MEM_KEY)||'{}');
const chatWindow = document.getElementById('chatWindow'); const chatInput = document.getElementById('chatInput'); const chatSend = document.getElementById('chatSend'); const fab = document.getElementById('fab');

function appendBot(text, opts={}){ const d=document.createElement('div'); d.className='chat-bubble chat-bot'; d.innerText=text; if(opts.strong) d.style.fontWeight='700'; d.style.padding='8px'; d.style.borderRadius='10px'; d.style.margin='8px 0'; chatWindow.appendChild(d); chatWindow.scrollTop = chatWindow.scrollHeight; }
function appendUser(text){ const d=document.createElement('div'); d.className='chat-bubble chat-user'; d.innerText=text; d.style.padding='8px'; d.style.borderRadius='10px'; d.style.margin='8px 0'; chatWindow.appendChild(d); chatWindow.scrollTop = chatWindow.scrollHeight; }

function learn(text){ const words = (text.toLowerCase().match(/\b[a-z√£√µ√°√©√≠√≥√∫√ß]{3,}\b/g)||[]); words.forEach(w=> botMemory[w] = (botMemory[w]||0)+1); localStorage.setItem(BOT_MEM_KEY, JSON.stringify(botMemory)); }

function detectIntent(text){
  const t = text.toLowerCase();
  const crisis = ['suicid','quero morrer','me matar','tirar minha vida','acabar com minha vida'];
  if(crisis.some(w=>t.includes(w))) return {type:'crisis', reply:'Se voc√™ pensa em se machucar, procure ajuda IMEDIATA. No Brasil: CVV 188. Quer que eu te mostre passos pr√°ticos agora?', urgent:true};
  const qmatch = t.match(/\bquiz\s+([a-z√ß√£√µ_ ]+)/i);
  if(qmatch){ const name = qmatch[1].trim(); const found = DISEASES.find(d=> d.id.includes(name.replace(/\s+/g,'_')) || d.title.toLowerCase().includes(name)); if(found) return {type:'open_quiz', reply:`Beleza ‚Äî abrindo quiz de ${found.title}`, action:()=>openQuiz(found.id)}; return {type:'no_quiz', reply:'N√£o encontrei esse quiz. Tente: ansiedade, depress√£o, toc, bipolar, sono.'}; }
  const sad = ['triste','tristeza','depress','chorei','vazio']; const anx = ['ansios','ansiedade','nervos','p√¢nico','panico','medo']; const stress = ['estress','exaust','cansad'];
  if(sad.some(w=>t.includes(w))) return {type:'emotion', reply:'Poxa... sinto muito. Quer 3 passos r√°pidos para aliviar agora? (1) respirar, (2) caminhar 5 min, (3) escrever 3 coisas boas)', emotion:'sad'};
  if(anx.some(w=>t.includes(w))) return {type:'emotion', reply:'Parece ansiedade. Quer que eu te guie numa respira√ß√£o 4-4-6 agora?', emotion:'anx'};
  if(stress.some(w=>t.includes(w))) return {type:'emotion', reply:'Parece estresse. Posso sugerir pausas e alongamentos curtos.', emotion:'stress'};
  if(t.includes('o que √©')||t.includes('explica')){ const found = DISEASES.find(d=> t.includes(d.id) || t.includes(d.title.toLowerCase().split(' ')[0])); if(found) return {type:'explain', reply:`${found.title}: ${found.short}`, action:()=>navGo('aprender')}; return {type:'ask', reply:'Sobre qual condi√ß√£o quer saber (ex: ansiedade)?'}; }
  if(text.trim().length<10) return {type:'prompt', reply:'Conta um pouco mais pra eu entender :)'};
  return {type:'reflect', reply:'Entendi. Voc√™ prefere: 1) explica√ß√£o, 2) passos pr√°ticos, 3) come√ßar um quiz? Responda 1/2/3.'};
}

function handleChat(input){
  const text = (input||'').trim(); if(!text) return;
  appendUser(text); learn(text);
  const intent = detectIntent(text);
  appendBot(intent.reply, {strong:intent.urgent});
  if(intent.action) setTimeout(()=> intent.action(),700);
}
chatSend.addEventListener('click', ()=>{ handleChat(chatInput.value); chatInput.value=''; chatInput.focus(); });
chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); chatSend.click(); }});
document.getElementById('fab').addEventListener('click', ()=>{ navGo('ajuda'); chatInput.focus(); appendBot('Abrindo assistente ‚Äî escreva o que sente ou digite \"quiz ansiedade\" para come√ßar.'); });

/* initial greeting */
(function greet(){ if(!localStorage.getItem('mv_seen_all')){ setTimeout(()=> appendBot('Oii! Eu sou o Mente Verde üåø ‚Äî como voc√™ est√° hoje?'),420); localStorage.setItem('mv_seen_all','1'); } else setTimeout(()=> appendBot('Bem-vindo de volta! Quer conversar ou fazer um quiz?'),420); })();

/* =================== ANIMA√á√ïES (folhas) =================== */
function spawnLeaf(){
  const el = document.createElement('div'); el.className='leaf'; el.style.left = Math.random()*100 + '%'; el.style.fontSize = (12 + Math.random()*30) + 'px'; el.innerText = ['üçÉ','üåø','üçÇ'][Math.floor(Math.random()*3)]; document.body.appendChild(el);
  const dur = 9000 + Math.random()*7000; let start = null;
  function anim(ts){ if(!start) start = ts; const p = (ts - start) / dur; el.style.transform = `translateY(${(-window.innerHeight - 200) * p}px) rotate(${p*360}deg)`; el.style.opacity = String(1 - p); if(p < 1) requestAnimationFrame(anim); else el.remove(); }
  requestAnimationFrame(anim);
}
setInterval(spawnLeaf, 900);

/* =================== HELPERS & INIT =================== */
function escapeHtml(s){ return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
navGo('home'); buildCatalog(); buildQuizzes(); loadDiary();
document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
quizModal.addEventListener('click', e=>{ if(e.target === quizModal) closeModal(); });
</script>
</body>
</html>
